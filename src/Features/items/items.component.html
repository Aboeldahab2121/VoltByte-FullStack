<div class="container mt-5 align-items-center">
  <h1 class="display-5 text-white fw-bold">Available Items</h1>

  <div class="container mt-3 d-flex p-0">
    <form class="d-flex w-100" role="search">
      <input
        #searchInput
        class="form-control me-2 rounded-pill"
        type="search"
        placeholder="Search"
        (input)="filterList(searchInput.value)"
        aria-label="Search"
      />
      <button
        class="btn btn-outline-primary rounded-pill"
        type="button"
        (click)="filterList(searchInput.value)"
      >
        Search
      </button>
    </form>

    <div class="dropdown ms-3">
      <a
        class="btn btn-primary text-dark dropdown-toggle rounded-pill"
        href="#"
        role="button"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        Category
      </a>

      <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="#">GPU</a></li>
        <li><a class="dropdown-item" href="#">CPU</a></li>
        <li><a class="dropdown-item" href="#">RAM</a></li>
      </ul>
    </div>
  </div>

  <div class="container text-white mt-3 p-0 d-flex gap-2 align-items-center">
    <span>Filter:</span>
    <mat-chip-option>In Stock</mat-chip-option>
    <span class="ms-3">Brand: </span>
    <mat-chip-listbox>
      <mat-chip-option>Nvidia</mat-chip-option>
      <mat-chip-option>AMD</mat-chip-option>
      <mat-chip-option>Intel</mat-chip-option>
    </mat-chip-listbox>
  </div>

  <!-- Loading State -->
  @if (isLoading) {
    <div class="text-center text-white mt-5">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-2">Loading items...</p>
    </div>
  }

  <!-- Error State -->
  @if (errorMessage && !isLoading) {
    <div class="alert alert-danger mt-5" role="alert">
      {{ errorMessage }}
    </div>
  }

  <!-- Items List -->
  @if (!isLoading && !errorMessage) {
    <div class="div-container mt-5">
      <h1 class="display-6 text-white">Discover</h1>
      
      @if (itemsFiltered.length === 0) {
        <div class="text-white text-center mt-4">
          <p>No items found matching your search.</p>
        </div>
      } @else {
        <div class="row">
          @for (item of itemsFiltered; track item.id) {
            <div class="col-3 my-4">
              <div [@listAnimation]>
                <div class="card rounded-5" style="width: 18rem">
                  <img 
                    [src]="item.image" 
                    class="card-img-top rounded-5" 
                    [alt]="item.title"
                    style="height: 200px; object-fit: cover;"
                  />
                  <div class="card-body">
                    <h5 class="card-title">{{item.title}}</h5>
                    <p class="card-text">
                      Price: ${{item.price | number:'1.2-2'}} <br />
                      Qty: {{item.quantity}}
                    </p>
                    <div class="d-flex gap-2">
                      <a href="#" class="btn btn-success rounded-pill">Add To Build</a>
                      <a href="#" class="btn btn-outline-primary rounded-pill">Details</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          }
        </div>
      }
    </div>
  }
</div>